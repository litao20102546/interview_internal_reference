# 蚂蚁金服

## 项目和K8S基础知识

1. 说一下项目比较有挑战的切入点
2. 集群联邦架构和机制
3. 创建pod 流程
4. service endpoint pod 联系，一个服务请求从apiserver 到具体的pod
5. kube-scheduler 三级队列 ？
6. kube-proxy性能问题和异步问题
7. 身份认证，鉴权，准入控制（kubelet和apiserver的身份认证）
8. list-watch 机制

## 大文件处理思路

大文件求交集。机器内存 4GB 内存，两个文件各自400GB。文件里记录以行作为分隔符。求两个文件的交集



# 滴滴（云管控jstack）

http://collabedit.com/rr37q

1. 聊了半小时项目（面试官不懂k8S）

2. go 语言考察

   * goroutine 调度（MPG）
   * 切片，值传递还是引用传递？函数内扩大切片，函数外容量会变吗（不会）
   * 一个goroutine阻塞，怎么让调度器切到其他goroutine

3. 算法：二分查找重复元素, 提出二分法优化

   ```python
   def binary_search(target,my_list):
       left = 0
       right = len(my_list)-1
       result = []
       while left <= right:
           mid = (left+right) // 2  # 中间值
           if my_list[mid]== target:
               result.append(mid)
               l = mid  # target目标元素向左搜索
               while True:
                   if l>1 and my_list[l - 1] == target:
                       result.append(l - 1)
                       l = l - 1
                   else:
                       break
               result.reverse()
               r = mid  # target目标元素向右搜索
               while True:
                   if my_list[r + 1] == target:
                       result.append(r + 1)
                       r = r + 1
                   else:
                       break
               return result
           elif my_list[mid] < target:
               left = mid + 1
           else:
               right = mid - 1
       return -1  # 未找到该元素
   ```

   * 可以优化 mid = (target-my_list[left])/(my_list[right]-my_list[left]) * (right-left)

# 百度

1. 一面：
   K8S怎么避免实现内存碎片调度
   线程同步方法
   内核trace
   ListWatch
   Golang内存调度+GC
   算法：

   * 快排
   * 链表逆序

2. 二面：
   聊项目，改进

   Cgroup内核调优

   调度图的多个job，发散
   K8S内核优化